const e=document.querySelector("details");e?.addEventListener("toggle",(function(){e?.hasAttribute("open")?document.body.classList.add("noScroll"):document.body.classList.remove("noScroll")}));const t=document.querySelector("footer .addresses"),n=new WeakMap,o=document.createElement("li");let a;function r(e){e.preventDefault(),a&&(a.style.fontWeight="normal",n.get(a).remove()),this.style.fontWeight="bold",a=this,o.append(n.get(this))}t.parentElement.parentElement.append(o),t.replaceWith(...Array.from(t.children,((e,t)=>{const o=document.createElement("a"),a=e.querySelector("address");return o.href="#",n.set(o,a),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",r),o.title=a.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e])));const c=new DOMParser;function l(e,t,n,o){const{feedContainer:a,feedContainerWrapper:r}=function(){const e=document.createElement("div"),t=document.createElement("div");return e.style.position="relative",e.style.width="100%",e.append(t),{feedContainer:t,feedContainerWrapper:e}}();return a.classList.add("blog","loading"),e.replaceWith(r),fetch(t).then((e=>e.ok?e.text():Promise.reject(e))).then((async e=>{const t=c.parseFromString(e,"application/xml"),r=t.createDocumentFragment();for(const e of t.querySelectorAll(n))o(e,r,c);return a.append(r),a.classList.remove("loading"),a})).catch((t=>(r.replaceWith(e),Promise.reject(Error("Failed to load RSS feed",{cause:t})))))}const s=/#\w+\b/g,i=document.createElement("span");document.getElementById("podcast").lastElementChild?.before(i),document.getElementById("podcast")?.classList.add("podcast");const d=new Set,m=new WeakMap,p=new Set,u=document.createElement("input");function h(){console.log(location.hash);for(const e of p)e.hidden=d.has(location.hash)&&!m.get(e).includes(location.hash);u.value=location.hash}var f,y;(f=i,y=(e,t,n)=>{p.add(e);const o=n.description.matchAll(s),a=Array.from(o).map((e=>e.join("")));m.set(e,a);for(const e of a)d.has(e)||d.add(e);t.append(e)},l(f,"https://anchor.fm/s/4ce11bac/podcast/rss","channel>item",((e,t,n)=>{const o=(e=>({title:e.querySelector("title").textContent,description:e.querySelector("description").textContent,link:e.querySelector("link").textContent}))(e);y(function(e,t){const n=document.createElement("article"),o=document.createElement("h4");o.textContent=e.title;const a=document.createElement("p"),r=t.parseFromString(e.description,"text/html");a.textContent=r.body.firstElementChild?.nextElementSibling?.textContent??"";const c=document.createElement("a");return c.href=e.link,c.target="_blank",c.rel="noopener",c.textContent="Play",c.classList.add("cta"),n.append(o,a,c),n}(o,n),t,o)}))).then((e=>(function(){const e=document.createElement("datalist");e.id="tags-list",e.append(...Array.from(d,(e=>{const t=document.createElement("option");return t.value=e,t}))),u.type="search",u.placeholder="Filter by tag",u.setAttribute("aria-label",u.placeholder),u.setAttribute("list",e.id);const t=()=>{location.hash=u.value};u.addEventListener("change",t),u.addEventListener("search",t),document.querySelector("main>aside").append(e,u,...Array.from(new Set(Array.from(p).flatMap((e=>m.get(e)))),(e=>{const t=document.createElement("a");return t.textContent=e,t.href=e,t.className="tag",t})))}(),h(),e)),console.warn),addEventListener("hashchange",h);