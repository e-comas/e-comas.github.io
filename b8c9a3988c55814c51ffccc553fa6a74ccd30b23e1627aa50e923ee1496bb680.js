const e=document.querySelector("footer .addresses"),t=new WeakMap,n=document.createElement("li");let a;function r(e){e.preventDefault(),a&&(a.style.fontWeight="normal",t.get(a).remove()),this.style.fontWeight="bold",a=this,n.append(t.get(this))}e.parentElement.parentElement.append(n),e.replaceWith(...Array.from(e.children,((e,n)=>{const a=document.createElement("a"),o=e.querySelector("address");return a.href="#",t.set(a,o),a.textContent=e.firstElementChild.textContent,a.style.fontWeight="normal",a.addEventListener("click",r),a.title=o.textContent,a})).flatMap(((e,t)=>[t?" | ":" ",e])));const o=new Set,c=new WeakMap,l=document.querySelectorAll("main>section>article"),s=new Map(["#Strategy","#Operations","#Content","#Advertising"].map((e=>[e,[]])));for(const e of l)c.set(e,Array.from(e.querySelectorAll(".tags>li"),(t=>{const n="#"+t.textContent;s.get(n)?.push(e);const a=document.createElement("a");return a.href=n,a.className="tag",a.append(t.firstChild),t.append(a),o.add(n),n})));const i=document.createElement("datalist");i.id="tags-list",i.append(...Array.from(o,(e=>{const t=document.createElement("option");return t.value=e,t})));const d=document.createElement("input");d.type="search",d.placeholder="Filter by tag",d.setAttribute("aria-label",d.placeholder),d.setAttribute("list",i.id);const h=()=>{location.hash=d.value};d.addEventListener("change",h),d.addEventListener("search",h),document.querySelector("main>aside").append(i,d,...Array.from(s,(([e,t])=>{const n=document.createElement("a");return n.textContent=e,n.href=e,n.className="cta tag",[n,...Array.from(new Set(t.flatMap((e=>c.get(e)))),(t=>{if(null==t||t===e)return document.createDocumentFragment();const n=document.createElement("a");return n.textContent=t,n.href=t,n.className="tag",n}))]})).flat());const m=document.createElement("style");function u(){if(o.has(location.hash)){for(const e of l)e.hidden=!c.get(e).includes(location.hash);d.value=location.hash,document.head.append(m),m.sheet.insertRule(`a.tag:not(.cta)[href=${JSON.stringify(location.hash)}]{color:#65D7BE}`,0),m.sheet.insertRule(`a.cta.tag[href=${JSON.stringify(location.hash)}]{background-color:#65D7BE}`,1)}else{for(const e of l)e.hidden=!1;d.value="",m.remove()}d.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}addEventListener("hashchange",u),u();