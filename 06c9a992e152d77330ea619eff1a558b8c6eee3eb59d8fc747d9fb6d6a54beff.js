const e=document.querySelector("footer .addresses"),t=new WeakMap,n=document.createElement("li");let o;function r(e){e.preventDefault(),o&&(o.style.fontWeight="normal",t.get(o).remove()),this.style.fontWeight="bold",o=this,n.append(t.get(this))}e.parentElement.parentElement.append(n),e.replaceWith(...Array.from(e.children,((e,n)=>{const o=document.createElement("a"),l=e.querySelector("address");return o.href="#",t.set(o,l),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",r),o.title=l.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e])));const l=new DOMParser;function c(){const e=document.createElement("div"),t=document.createElement("div");return e.style.position="relative",e.style.width="100%",e.append(t),{feedContainer:t,feedContainerWrapper:e}}const i=new WeakMap,a=new IntersectionObserver((e=>{for(const t of e)i.get(t.target)?.(t.isIntersecting)}),{threshold:[1]});function s(e,t){i.set(e,function(e,t){let n;e.classList.add("js-auto-slide");const o=document.createElement("button");o.type="button",o.setAttribute("aria-label","Slide to previous item");const r=document.createElement("button");let l;function c(){n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function i(){n=n?.nextElementSibling||e.firstElementChild,n!=o&&n!==r||(n=e.firstElementChild),c()}function s(){clearInterval(l),n??=e.firstElementChild}return r.type="button",r.setAttribute("aria-label","Slide to next item"),e.append(o,r),o.addEventListener("click",s),r.addEventListener("click",s),o.addEventListener("click",(function(){n=n?.previousElementSibling||e.lastElementChild,n!=o&&n!==r||(n=o.previousElementSibling),c()})),r.addEventListener("click",i),e.addEventListener("wheel",(function(e){Math.abs(e.deltaX)>20&&clearInterval(l)}),{passive:!0}),a.observe(e),e=>{e?l=setInterval(i,t):clearInterval(l)}}(e,t))}const d=/#\w+\b/g,m=document.createElement("span");document.getElementById("podcast").lastElementChild?.before(m);const p=Object.create(null);var u,f;(u=m,f=(e,t,n)=>{for(const[o]of n.description.matchAll(d)){if(!(o in p)){const e=document.createElement("section");e.classList.add("podcast");const n=document.createElement("h3");n.textContent=o,n.style.textTransform="none";const{feedContainerWrapper:r,feedContainer:l}=c();l.classList.add("dynamic-list"),e.append(n,r),t.append(e),p[o]=l}p[o].append(e.cloneNode(!0))}},function(e,t,n,o){const{feedContainer:r,feedContainerWrapper:i}=c();return r.classList.add("dynamic-list","loading"),e.replaceWith(i),fetch(t).then((e=>e.ok?e.text():Promise.reject(e))).then((async e=>{const t=l.parseFromString(e,"application/xml"),c=t.createDocumentFragment();for(const e of t.querySelectorAll(n))o(e,c,l);return r.append(c),r.classList.remove("loading"),r})).catch((t=>(i.replaceWith(e),Promise.reject(Error("Failed to load RSS feed",{cause:t})))))}(u,"https://anchor.fm/s/4ce11bac/podcast/rss","channel>item",((e,t,n)=>{const o=(e=>({title:e.querySelector("title").textContent,description:e.querySelector("description").textContent,link:e.querySelector("link").textContent}))(e);f(function(e,t){const n=document.createElement("article"),o=document.createElement("h4");o.textContent=e.title;const r=document.createElement("p"),l=t.parseFromString(e.description,"text/html");r.textContent=l.body.firstElementChild?.nextElementSibling?.textContent??"";const c=document.createElement("a");return c.href=e.link,c.target="_blank",c.rel="noopener",c.textContent="Play",n.append(o,r,c),n}(o,n),t,o)}))).then((e=>{for(const e of Object.values(p))console.log(e,e.childElementCount),1===e.childElementCount?e.style.overflowX="hidden":s(e,4e3);e.parentElement.parentElement.replaceWith(...e.children)}),console.warn);