const e=document.querySelector("details");e?.addEventListener("toggle",(function(){e?.hasAttribute("open")?document.body.classList.add("noScroll"):document.body.classList.remove("noScroll")})),addEventListener("resize",(t=>{window.innerWidth>990&&(e?.removeAttribute("open"),document.body.classList.remove("noScroll"))}));for(let e of document.body.getElementsByClassName("safariHover"))e.setAttribute("onclick"," ");for(let e of document.body.getElementsByClassName("safariActive"))e.setAttribute("ontouchstart"," ");const t=document.querySelector("footer .addresses"),n=new WeakMap,o=document.createElement("li");let r;function a(e){e.preventDefault(),r&&(r.style.fontWeight="normal",n.get(r).remove()),this.style.fontWeight="bold",r=this,o.append(n.get(this))}t.parentElement.parentElement.append(o),t.replaceWith(...Array.from(t.children,((e,t)=>{const o=document.createElement("a"),r=e.querySelector("address");return o.href="#",n.set(o,r),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",a),o.title=r.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e])));const c=new DOMParser;function s(e,t,n,o){const{feedContainer:r,feedContainerWrapper:a}=function(){const e=document.createElement("div"),t=document.createElement("div");return e.append(t),{feedContainer:t,feedContainerWrapper:e}}();return r.classList.add("blog","loading"),e.replaceWith(a),fetch(t).then((e=>e.ok?e.text():Promise.reject(e))).then((async e=>{const t=c.parseFromString(e,"application/xml"),a=t.createDocumentFragment();for(const e of t.querySelectorAll(n))o(e,a,c);return r.append(a),r.classList.remove("loading"),r})).catch((t=>(a.replaceWith(e),Promise.reject(Error("Failed to load RSS feed",{cause:t})))))}const l=/#\w+\b/g,d=document.createElement("span");document.getElementById("podcast").lastElementChild?.before(d);const i=new Set,m=new WeakMap,u=new Set,h=document.createElement("input"),p=document.createElement("style");function f(){const e=i.has(location.hash);for(const t of u)t.hidden=e&&!m.get(t).includes(location.hash);e?(h.value=location.hash,document.head.append(p),p.sheet.insertRule(`a.tag:not(.cta)[href=${JSON.stringify(location.hash)}]{color:#65D7BE}`,0),p.sheet.insertRule(`a.cta.tag[href=${JSON.stringify(location.hash)}]{background-color:#65D7BE}`,1)):(h.value="",p.remove())}const g=document.createElement("datalist");g.id="tags-list",h.type="search",h.placeholder="Filter by tag",h.setAttribute("aria-label",h.placeholder),h.setAttribute("list",g.id);const y=()=>{location.hash=h.value};h.addEventListener("change",y),h.addEventListener("search",y),document.querySelector("main>aside").append(g,h);const E=document.createElement("p");var v,S;E.id="loadingMessage",E.textContent="Fetching content from RSS feed, please wait...",document.getElementById("podcast")?.prepend(E),(v=d,S=(e,t,n)=>{u.add(e);const o=n.description.matchAll(l),r=Array.from(o).map((e=>e.join("")));m.set(e,r);for(const e of r)i.has(e)||i.add(e);t.append(e)},s(v,"https://anchor.fm/s/4ce11bac/podcast/rss","channel>item",((e,t,n)=>{const o=(e=>({title:e.querySelector("title").textContent,description:e.querySelector("description").textContent,link:e.querySelector("link").textContent}))(e);S(function(e,t){const n=document.createElement("article"),o=document.createElement("h4");o.textContent=e.title;const r=document.createElement("div"),a=t.parseFromString(e.description,"text/html");console.log(a.body),r.innerHTML=a.body.innerHTML??"";const c=document.createElement("a");return c.href=e.link,c.target="_blank",c.rel="noopener",c.textContent="Play",c.classList.add("cta"),n.append(o,r,c),n}(o,n),t,o)}))).catch((e=>{throw E.textContent="Error: "+e.message,E.classList.add("error"),e})).then((e=>(g.append(...Array.from(i,(e=>{const t=document.createElement("option");return t.value=e,t}))),document.querySelector("main>aside").append(...Array.from(new Set(Array.from(u).flatMap((e=>m.get(e)))),(e=>{const t=document.createElement("a");return t.textContent=e,t.href=e,t.className="tag",t}))),f(),document.getElementById("podcast")?.removeChild(E),e)),console.warn),addEventListener("hashchange",f);