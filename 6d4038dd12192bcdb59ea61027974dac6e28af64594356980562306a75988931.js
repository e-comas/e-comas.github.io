const e=document.querySelector("footer .addresses"),t=new WeakMap,n=document.createElement("li");let o,l;function a(e){e.preventDefault(),o&&(o.style.fontWeight="normal",t.get(o).remove()),this.style.fontWeight="bold",o=this,n.append(t.get(this))}function r(e){if(e.preventDefault(),null==l){const e=document.createElement("form"),t=document.createElement("div"),n=document.createElement("button");e.method="dialog",n.type="submit",n.title="Dismiss and close",n.append("❌"),t.append(n),e.append(t);const o=document.createElement("iframe");o.width="100%",l=document.createElement("dialog"),l.className="form-in-modal",l.append(e,o),document.body.append(l)}const t=l.lastChild,n=e.target.href;t.src!==n&&(t.src=n),t.height=.75*window.innerHeight-40,l.showModal()}if(e.parentElement.parentElement.append(n),e.replaceWith(...Array.from(e.children,((e,n)=>{const o=document.createElement("a"),l=e.querySelector("address");return o.href="#",t.set(o,l),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",a),o.title=l.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e]))),"HTMLDialogElement"in window)for(const e of document.querySelectorAll(".open-in-modal"))e.addEventListener("click",r);