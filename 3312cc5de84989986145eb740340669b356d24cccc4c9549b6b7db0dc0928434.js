const e=document.querySelector("details");e?.addEventListener("toggle",(function(){e?.hasAttribute("open")?document.body.classList.add("noScroll"):document.body.classList.remove("noScroll")}));const t=document.querySelector("footer .addresses"),n=new WeakMap,o=document.createElement("li");let a;function c(e){e.preventDefault(),a&&(a.style.fontWeight="normal",n.get(a).remove()),this.style.fontWeight="bold",a=this,o.append(n.get(this))}t.parentElement.parentElement.append(o),t.replaceWith(...Array.from(t.children,((e,t)=>{const o=document.createElement("a"),a=e.querySelector("address");return o.href="#",n.set(o,a),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",c),o.title=a.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e])));const r="ask-consent";let i,l=localStorage.getItem("cookie-consent"),s=!1;function d(){const e=document.createElement("dialog");e.id=r;const t="function"!=typeof e.showModal;{const n=document.createElement("h2");n.textContent="Cookie settings",n.id=r+"-heading",e.setAttribute("aria-labelledby",n.id);const o=document.createElement("p");o.id=r+"-description",e.setAttribute("aria-describedby",o.id);const a=document.createElement("strong");let c=[" You have previously ",a," the use of cookies."];switch(l){case"":a.textContent="declined";break;case"yes":a.textContent="accepted";break;default:c=[]}const i=document.createElement("a");i.href="/privacy.html",i.textContent="privacy policy",o.append("Some parts of this website that relies on third-party content that might store cookies on your computer. You can read more about this in our ",i,".",...c);const d=document.createElement("form");d.method="dialog";const m=document.createElement("div"),u=document.createElement("input");u.type="submit",u.name="no",u.value="Decline and close";const p=document.createElement("input");p.type="submit",p.name="yes",p.autofocus=!0,p.value="Accept and close";const h=document.createElement("input");h.type="submit",h.className="once",h.name="once",h.value="Yes, but keep asking me";const f=document.createElement("input");if(f.type="submit",f.className="once",f.name="maybe-later",f.value="Not this time, decide later",null==l){const e=document.createElement("div"),t=document.createElement("div");e.append(h,p),t.append(f,u),m.append(t,e)}else m.append(p,u);d.append(m),e.append(n,o,d),d.addEventListener("submit",(n=>{const o=n.submitter?.name;var a;"once"!==o&&"maybe-later"!==o&&(a="yes"===o,localStorage.setItem("cookie-consent",l=a?"yes":"")),s="yes"===o||"once"===o,t&&(n.preventDefault(),e.remove())}))}return t&&(e.showModal=function(){this.classList.add(r)}),e}function m(e,t){if(e?.preventDefault?.(),null!=i)return i;const n=d();return document.body.append(n),n.showModal(),n.addEventListener("close",(()=>n.remove()),{once:!0}),t?i=new Promise(((e,t)=>{n.addEventListener("close",(()=>{s?e():t(),s=!1,setTimeout((()=>{i=null}),999)}),{once:!0})})):void 0}const u=document.createElement("li"),p=document.createElement("a");function h(e){const t=document.createElement("iframe");t.height=e.offsetHeight,t.width=e.offsetWidth,t.title="YouTube video player",t.src=e.dataset.embed,t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","");const{parentElement:n}=e;n.classList.add("video-loading"),t.addEventListener("load",(()=>{n.classList.remove("video-link"),n.classList.remove("video-loading"),n.classList.add("video-playing"),requestAnimationFrame((()=>t.contentWindow.focus()))})),e.replaceWith(t)}function f(e){if(e.ctrlKey||e.metaKey||e.altKey)return;const t=null==l?m(null,!0):l;t&&(e.preventDefault(),"yes"===t?h(this):t.then((()=>h(this)),(()=>{window.open(this.href)})))}p.addEventListener("click",m),p.href="#",p.textContent="Cookie settings",u.append(p),document.querySelector("footer ul")?.append(u);const b=new DOMParser;function y(e,t,n,o){const{feedContainer:a,feedContainerWrapper:c}=function(){const e=document.createElement("div"),t=document.createElement("div");return e.style.position="relative",e.style.width="100%",e.append(t),{feedContainer:t,feedContainerWrapper:e}}();return a.classList.add("blog","loading"),e.replaceWith(c),fetch(t).then((e=>e.ok?e.text():Promise.reject(e))).then((async e=>{const t=b.parseFromString(e,"application/xml"),c=t.createDocumentFragment();for(const e of t.querySelectorAll(n))o(e,c,b);return a.append(c),a.classList.remove("loading"),a})).catch((t=>(c.replaceWith(e),Promise.reject(Error("Failed to load RSS feed",{cause:t})))))}const v=new WeakMap,E=new IntersectionObserver((e=>{for(const t of e)v.get(t.target)?.(t.isIntersecting)}),{threshold:[1]});function g(e,t){v.set(e,function(e,t){let n;e.classList.add("js-auto-slide");const o=document.createElement("button");o.type="button",o.setAttribute("aria-label","Slide to previous item");const a=document.createElement("button");let c;function r(){n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function i(){n=n?.nextElementSibling||e.firstElementChild,n!=o&&n!==a||(n=e.firstElementChild),r()}function l(){clearInterval(c),n??=e.firstElementChild}return a.type="button",a.setAttribute("aria-label","Slide to next item"),e.append(o,a),o.addEventListener("click",l),a.addEventListener("click",l),o.addEventListener("click",(function(){n=n?.previousElementSibling||e.lastElementChild,n!=o&&n!==a||(n=o.previousElementSibling),r()})),a.addEventListener("click",i),e.addEventListener("wheel",(function(e){Math.abs(e.deltaX)>20&&clearInterval(c)}),{passive:!0}),E.observe(e),e=>{e?c=setInterval(i,t):clearInterval(c)}}(e,t))}function w(e){const t=document.createElement("article");t.className="video-link background-wrapper";const n=document.createElement("a");n.href="https://www.youtube.com/watch?v="+e.videoId,n.dataset.embed=`https://www.youtube.com/embed/${e.videoId}?autoplay=1&amp;playsinline=1`,n.target="_blank",n.rel="noopener",n.title="Watch on YouTube",n.append("Play video on YouTube"),n.addEventListener("click",f,{once:!0});const o=document.createElement("img");return o.src=e.thumbnail.url,o.alt=e.title,o.className="background",o.width=e.thumbnail.width,o.height=e.thumbnail.height,o.setAttribute("loading","lazy"),t.append(o,n),t}for(const e of document.querySelectorAll("[data-embed-playlist]")){y(e,"https://e-comas-cors.herokuapp.com/"+encodeURI("https://www.youtube.com/feeds/videos.xml?playlist_id="+encodeURI(e.dataset.embedPlaylist)),"feed>entry",((e,t)=>{const n=e.getElementsByTagNameNS("http://search.yahoo.com/mrss/","group").item(0).getElementsByTagNameNS("http://search.yahoo.com/mrss/","thumbnail").item(0);t.append(w({title:e.querySelector("title").textContent,videoId:e.getElementsByTagNameNS("http://www.youtube.com/xml/schemas/2015","videoId").item(0).textContent,thumbnail:{url:n.getAttribute("url"),width:n.getAttribute("width"),height:n.getAttribute("height")}}))})).then((e=>g(e,4e3)),console.warn)}const k=document.createElement("span");var C,S;document.getElementById("podcast").lastElementChild?.before(k),document.getElementById("podcast")?.classList.add("podcast"),(C=k,S=(e,t)=>t.append(e),y(C,"https://anchor.fm/s/4ce11bac/podcast/rss","channel>item",((e,t,n)=>{const o=(e=>({title:e.querySelector("title").textContent,description:e.querySelector("description").textContent,link:e.querySelector("link").textContent}))(e);S(function(e,t){const n=document.createElement("article"),o=document.createElement("h4");o.textContent=e.title;const a=document.createElement("p"),c=t.parseFromString(e.description,"text/html");a.textContent=c.body.firstElementChild?.nextElementSibling?.textContent??"";const r=document.createElement("a");return r.href=e.link,r.target="_blank",r.rel="noopener",r.textContent="Play",r.classList.add("cta"),n.append(o,a,r),n}(o,n),t,o)}))).then((e=>g(e,4e3)),console.warn);const x=document.querySelectorAll("iframe");if(1!==x.length)console.warn(Error("There must be exactly 1 iframe element on the page"));else{const[e]=x;addEventListener("message",(t=>{"number"==typeof t.data&&(e.height=t.data+5)}))}