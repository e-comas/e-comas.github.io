let e=localStorage.getItem("cookie-consent");function t(){const t=document.createElement("dialog");t.id="ask-consent";const n="function"!=typeof t.showModal;{const o=document.createElement("h2");o.textContent="Cookie settings",o.id="ask-consent-heading",t.setAttribute("aria-labelledby",o.id);const a=document.createElement("p");a.id="ask-consent-description",t.setAttribute("aria-describedby",a.id);let i="";switch(e){case"":i=" You have previously chosen to decline the use of cookies.";break;case"yes":i=" You have previously consented to the use of cookies."}const c=document.createElement("a");c.href="/privacy.html",c.textContent="privacy policy",a.append("This website wants to store statistics cookies on your computer. You can read more about this in our ",c,".",i);const r=document.createElement("form");r.method="dialog";const l=document.createElement("div"),s=document.createElement("input");s.type="submit",s.name="no",s.value="Decline and close";const d=document.createElement("input");d.type="submit",d.name="yes",d.autofocus=!0,d.value="Accept and close",l.append(s,d),r.append(l),t.append(o,a,r),r.addEventListener("submit",(o=>{var a;a="yes"===o.submitter?.name,localStorage.setItem("cookie-consent",e=a?"yes":""),n&&(o.preventDefault(),t.remove())}))}return n&&(t.showModal=function(){this.classList.add("ask-consent")}),t}function n(e){e?.preventDefault?.();const n=t();document.body.append(n),n.showModal(),n.addEventListener("close",(()=>n.remove()),{once:!0})}const o=document.createElement("li"),a=document.createElement("a");a.addEventListener("click",n),a.href="#",a.textContent="Cookie policy",o.append(a),document.querySelector("footer ul")?.append(o),null==e&&n();const i=document.querySelector("footer .addresses"),c=new WeakMap,r=document.createElement("li");let l;function s(e){e.preventDefault(),l&&(l.style.textDecoration="none",c.get(l).remove()),this.style.textDecoration="underline",l=this,r.append(c.get(this))}function d(e){if(e.ctrlKey||e.metaKey||e.altKey)return;e.preventDefault();const t=document.createElement("iframe");t.height=this.offsetHeight,t.width=this.offsetWidth,t.title="YouTube video player",t.src=this.dataset.embed,t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen","");const{parentElement:n}=this;n.classList.add("video-loading"),t.addEventListener("load",(()=>{n.classList.remove("video-link"),n.classList.remove("video-loading"),n.classList.add("video-playing")})),this.replaceWith(t)}i.parentElement.parentElement.append(r),i.replaceWith(...Array.from(i.children,((e,t)=>{const n=document.createElement("a");return n.href="#",c.set(n,e.querySelector("address")),n.textContent=e.firstElementChild.textContent,n.style.textDecoration="none",n.addEventListener("click",s),n})).flatMap(((e,t)=>[t?" | ":" ",e])));const m=new DOMParser;function u(e,t,n,o){const a=document.createElement("div"),i=document.createElement("div");return i.classList.add("dynamic-list","loading"),a.style.position="relative",a.style.width="100%",a.append(i),e.replaceWith(a),fetch(t).then((e=>e.ok?e.text():Promise.reject(e))).then((async e=>{const t=m.parseFromString(e,"application/xml"),a=t.createDocumentFragment();for(const e of t.querySelectorAll(n))o(e,a,m);return i.append(a),i.classList.remove("loading"),i})).catch((t=>(a.replaceWith(e),Promise.reject(Error("Failed to load RSS feed",{cause:t})))))}const p=new WeakMap,h=new IntersectionObserver((e=>{for(const t of e)p.get(t.target)?.(t.isIntersecting)}),{threshold:[1]});function y(e,t){p.set(e,function(e,t){let n;e.classList.add("js-auto-slide");const o=document.createElement("button");o.type="button",o.setAttribute("aria-label","Slide to previous item");const a=document.createElement("button");let i;function c(){n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function r(){n=n?.nextElementSibling||e.firstElementChild,n!=o&&n!==a||(n=e.firstElementChild),c()}function l(){clearInterval(i),n??=e.firstElementChild}return a.type="button",a.setAttribute("aria-label","Slide to next item"),e.append(o,a),o.addEventListener("click",l),a.addEventListener("click",l),o.addEventListener("click",(function(){n=n?.previousElementSibling||e.lastElementChild,n!=o&&n!==a||(n=o.previousElementSibling),c()})),a.addEventListener("click",r),e.addEventListener("wheel",(function(e){Math.abs(e.deltaX)>20&&clearInterval(i)}),{passive:!0}),h.observe(e),e=>{e?i=setInterval(r,t):clearInterval(i)}}(e,t))}function b(e){const t=document.createElement("article");t.className="video-link background-wrapper";const n=document.createElement("a");n.href="https://www.youtube.com/watch?v="+e.videoId,n.dataset.embed=`https://www.youtube.com/embed/${e.videoId}?autoplay=1&amp;playsinline=1`,n.target="_blank",n.rel="noopener",n.title="Watch on YouTube",n.append("Play video on YouTube"),n.addEventListener("click",d,{once:!0});const o=document.createElement("img");return o.src=e.thumbnail.url,o.alt=e.title,o.className="background",o.width=e.thumbnail.width,o.height=e.thumbnail.height,o.setAttribute("loading","lazy"),t.append(o,n),t}for(const e of document.querySelectorAll("[data-embed-playlist]")){u(e,"https://e-comas-cors.herokuapp.com/"+encodeURI("https://www.youtube.com/feeds/videos.xml?playlist_id="+encodeURI(e.dataset.embedPlaylist)),"feed>entry",((e,t)=>{const n=e.getElementsByTagNameNS("http://search.yahoo.com/mrss/","group").item(0).getElementsByTagNameNS("http://search.yahoo.com/mrss/","thumbnail").item(0);t.append(b({title:e.querySelector("title").textContent,videoId:e.getElementsByTagNameNS("http://www.youtube.com/xml/schemas/2015","videoId").item(0).textContent,thumbnail:{url:n.getAttribute("url"),width:n.getAttribute("width"),height:n.getAttribute("height")}}))})).then((e=>y(e,4e3)),console.warn)}const f=document.createElement("span");document.getElementById("podcast").lastElementChild?.before(f),u(f,"https://anchor.fm/s/4ce11bac/podcast/rss","channel>item",((e,t,n)=>t.append(function(e,t){const n=document.createElement("article"),o=document.createElement("h4");o.textContent=e.title;const a=document.createElement("p"),i=t.parseFromString(e.description,"text/html");a.textContent=i.body.firstElementChild?.nextElementSibling?.textContent??"";const c=document.createElement("a");return c.href=e.link,c.target="_blank",c.rel="noopener",c.textContent="Play",n.append(o,a,c),n}({title:e.querySelector("title").textContent,description:e.querySelector("description").textContent,link:e.querySelector("link").textContent},n)))).then((e=>y(e,4e3)),console.warn);const v=document.querySelectorAll("iframe");if(1!==v.length)console.warn(Error("There must be exactly 1 iframe element on the page"));else{const[e]=v;addEventListener("message",(t=>{"number"==typeof t.data&&(e.height=t.data+5)}))}