const e=document.querySelector("footer .addresses"),t=new WeakMap,n=document.createElement("li");let o;function a(e){e.preventDefault(),o&&(o.style.fontWeight="normal",t.get(o).remove()),this.style.fontWeight="bold",o=this,n.append(t.get(this))}e.parentElement.parentElement.append(n),e.replaceWith(...Array.from(e.children,((e,n)=>{const o=document.createElement("a"),c=e.querySelector("address");return o.href="#",t.set(o,c),o.textContent=e.firstElementChild.textContent,o.style.fontWeight="normal",o.addEventListener("click",a),o.title=c.textContent,o})).flatMap(((e,t)=>[t?" | ":" ",e])));let c,l=localStorage.getItem("cookie-consent"),s=!1;function i(){const e=document.createElement("dialog");e.id="ask-consent";const t="function"!=typeof e.showModal;{const n=document.createElement("h2");n.textContent="Cookie settings",n.id="ask-consent-heading",e.setAttribute("aria-labelledby",n.id);const o=document.createElement("p");o.id="ask-consent-description",e.setAttribute("aria-describedby",o.id);const a=document.createElement("strong");let c=[" You have previously ",a," the use of cookies."];switch(l){case"":a.textContent="declined";break;case"yes":a.textContent="accepted";break;default:c=[]}const i=document.createElement("a");i.href="/privacy.html",i.textContent="privacy policy",o.append("Some parts of this website that relies on third-party content that might store cookies on your computer. You can read more about this in our ",i,".",...c);const r=document.createElement("form");r.method="dialog";const d=document.createElement("div"),m=document.createElement("input");m.type="submit",m.name="no",m.value="Decline and close";const u=document.createElement("input");u.type="submit",u.name="yes",u.autofocus=!0,u.value="Accept and close";const p=document.createElement("input");p.type="submit",p.className="once",p.name="once",p.value="Yes, but keep asking me";const h=document.createElement("input");if(h.type="submit",h.className="once",h.name="maybe-later",h.value="Not this time, decide later",null==l){const e=document.createElement("div"),t=document.createElement("div");e.append(p,u),t.append(h,m),d.append(t,e)}else d.append(u,m);r.append(d),e.append(n,o,r),r.addEventListener("submit",(n=>{const o=n.submitter?.name;var a;"once"!==o&&"maybe-later"!==o&&(a="yes"===o,localStorage.setItem("cookie-consent",l=a?"yes":"")),s="yes"===o||"once"===o,t&&(n.preventDefault(),e.remove())}))}return t&&(e.showModal=function(){this.classList.add("ask-consent")}),e}function r(e,t){if(e?.preventDefault?.(),null!=c)return c;const n=i();return document.body.append(n),n.showModal(),n.addEventListener("close",(()=>n.remove()),{once:!0}),t?c=new Promise(((e,t)=>{n.addEventListener("close",(()=>{s?e():t(),s=!1,setTimeout((()=>{c=null}),999)}),{once:!0})})):void 0}const d=document.createElement("li"),m=document.createElement("a");function u(e){if(e.ctrlKey||e.metaKey||e.altKey)return;const t=null==l?r(null,!0):l;t&&(e.preventDefault(),"yes"===t?h(this):t.then((()=>h(this)),(()=>{window.open(this.href)})))}let p;function h(e){let t=e;do{t=t.parentElement}while(null!=t&&"figure"!==t.nodeName.toLowerCase());if(t?.id&&(location.hash=t.id),null==p){const e=document.createElement("form"),t=document.createElement("div"),n=document.createElement("button");e.method="dialog",n.type="submit",n.title="Dismiss and close",n.append("❌"),t.append(n),e.append(t);const o=document.createElement("iframe");o.width="100%",o.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),p=document.createElement("dialog"),p.addEventListener("close",(()=>{location.hash="/"})),p.className="form-in-modal",p.append(e,o),document.body.append(p)}const n=p.lastChild,o=e.href;n.src!==o&&(n.src=o),n.height=.75*window.innerHeight-40,p.open||p.showModal()}if(m.addEventListener("click",r),m.href="#",m.textContent="Cookie settings",d.append(m),document.querySelector("footer ul")?.append(d),"HTMLDialogElement"in window){const e=".open-in-modal";for(const t of document.querySelectorAll(e))t.addEventListener("click",u);const t=t=>{const n=document.getElementById(location.hash.replace(/^#/,""))?.querySelector(e);null==n?(p?.close(),t?.preventDefault?.()):Reflect.apply(u,n,[{preventDefault(){}}])};addEventListener("hashchange",t),addEventListener("popstate",t),t()}